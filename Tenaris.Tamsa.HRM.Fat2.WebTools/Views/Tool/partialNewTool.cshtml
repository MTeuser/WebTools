@model IEnumerable<Tenaris.Tamsa.HRM.Fat2.DataAccess.Models.Tool_Property>
@{
    Layout = null;
    int ColsControls = ViewBag.numCols;
    int index = 0;
}
<script src="~/Scripts/jquery-1.8.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<style>
    #dvfrmElements {
        border:1px solid #000; 
        margin-top:1px; 
        margin-bottom:1px; 
        margin-left:auto; 
        margin-right:auto;
        /*width:600px;*/
    }
        #dvfrmElements input {
            width:200px;
        }

</style>

@using (Ajax.BeginForm("AddNew", "Tool", FormMethod.Post, new AjaxOptions { OnSuccess = "msjSuccess(data)" }, new { @id="frmAddNew" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <div class="row" id="dvfrmElements">
        <table style="width: 100%; border-spacing: 2px;" class="tableData">
                @Html.Hidden("idCatalog","@(ViewBag.idCatalog)")
            
                @foreach (var property in Model)
                {
                     HtmlString tr1 = new HtmlString("");
                        HtmlString tr2 = new HtmlString(""); 
                    if (index == 0)
                    {
                       tr1 = new HtmlString("<tr>");
                       
                    }
                    if (index == (ColsControls-1))
                    {                        
                        tr2 = new HtmlString("</tr>");
                    }
                    index++;
                    if(index == ColsControls)
                    {
                        index = 0;
                    }
                     @(tr1)
   

        <td class=" itemcell">
            @property.Name
        </td>
        <td class="itemcellValue">
            @Html.TextBox(property.idProperty.ToString())
        </td>
    
                    @(tr2)
                }
              
            </table>
        </div>
    
    <div id="gridFooter">
        <div class="form-group">
            <div class="col-sm-6" style=" padding-bottom:5px">
                <input id="btnOk" type=button value="Aceptar" class="csbutton" style="margin-top:5px; width:150px; font-size:10pt;" />
                <input id="btnCancel" type=button value="Cancelar" class="csbutton" style="margin-top:5px; width:150px; font-size:10pt;" />
            </div>
        </div>
        </div>

}

        <script>
            function msjSuccess(data) {                
                if (data.Success == 1)
                {
                    $("#DivToAppendPartialView").dialog("close");
                    $("#frmSearch").submit();
                }
            }

            $.datepicker.setDefaults($.datepicker.regional['es-MX']);

            $("[name='5']").val("@(DateTime.Now.ToString("dd/MM/yyy"))");
            $("[name='5']").datepicker();
            $("[name='1']").autocomplete({source : ["SS","TI","AA"]});
            $('#ui-datepicker-div').wrap('<div class="Tenaris"></div>');
            $('#btnCancel').button().click(function () {
                $("#DivToAppendPartialView").dialog("close");
            });
            $("#btnOk").button().click(function () { 
                $("#frmAddNew").submit();                
            });
            
        </script>
